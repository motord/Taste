{% macro render_discussion_list_item(discussion) -%}
<li class="Item Alt  Mine">
    <div class="StatBox AnswersBox"><span>Comments</span>{{ discussion.num_messages() }}</div>
    <div class="StatBox ViewsBox"><span>Views</span>{{ discussion.num_views() }}</div>
    <div class="Options">
        <a href="/index.php?p=/vanilla/discussion/bookmark/1/Z4J2GFMVJ0YL&amp;amp;Target=vanilla%2Fdiscussions%2F0%2F1%2Fgeneral" class="Bookmark" title="Bookmark">
            <span class="Star"><img src="/media/images/pixel.png" alt="Bookmark" /></span>
        </a>
        <ul class="Options">
          <li>
            <strong>Options</strong>
            <ul>
               <li><a href="/index.php?p=/vanilla/post/editdiscussion/1" class="EditDiscussion">Edit</a></li>
               <li><a href="/index.php?p=/vanilla/discussion/announce/1/Z4J2GFMVJ0YL" class="AnnounceDiscussion">Announce</a></li>
               <li><a href="/index.php?p=/vanilla/discussion/sink/1/Z4J2GFMVJ0YL&amp;amp;Target=vanilla%2Fdiscussions%2F0%2F1%2Fgeneral" class="SinkDiscussion">Sink</a></li>
               <li><a href="/index.php?p=/vanilla/discussion/close/1/Z4J2GFMVJ0YL&amp;amp;Target=vanilla%2Fdiscussions%2F0%2F1%2Fgeneral" class="CloseDiscussion">Close</a></li>
               <li><a href="/index.php?p=/vanilla/discussion/delete/1/Z4J2GFMVJ0YL&amp;amp;Target=vanilla%2Fdiscussions%2F0%2F1%2Fgeneral" class="DeleteDiscussion">Delete</a></li>
            </ul>
          </li>
        </ul>
    </div>
    <div class="ItemContent Discussion">
         <a href="/forum/discussion/{{ discussion.key() }}" class="Title">{{ discussion.title }}</a>
         <div class="Meta">
             <span class="CommentCount">1 comment</span>
             <span class="LastCommentBy">Started by <a href="/user/{{ discussion.owner.user_name }}">{{ discussion.owner.user_name }}</a></span>
             <span class="LastCommentDate">August 6</span>
             <span><a href="/forum/categories/{{ discussion.parent().name }}" class="Category">{{ discussion.parent().name }}</a></span>
         </div>
    </div>
</li>
{%- endmacro %}

{% macro render_course_list_item(course) -%}
<li class="Item Alt  Mine">
    <div class="StatBox AnswersBox"><span>Comments</span>{{ course.num_messages() }}</div>
    <div class="StatBox ViewsBox"><span>Views</span>{{ course.num_views() }}</div>
    <div class="Options">
        <a href="/index.php?p=/vanilla/discussion/bookmark/1/Z4J2GFMVJ0YL&amp;amp;Target=vanilla%2Fdiscussions%2F0%2F1%2Fgeneral" class="Bookmark" title="Bookmark">
            <span class="Star"><img src="/media/images/pixel.png" alt="Bookmark" /></span>
        </a>
        <ul class="Options">
          <li>
            <strong>Options</strong>
            <ul>
               <li><a href="/index.php?p=/vanilla/post/editdiscussion/1" class="EditDiscussion">Edit</a></li>
               <li><a href="/index.php?p=/vanilla/discussion/announce/1/Z4J2GFMVJ0YL" class="AnnounceDiscussion">Announce</a></li>
               <li><a href="/index.php?p=/vanilla/discussion/sink/1/Z4J2GFMVJ0YL&amp;amp;Target=vanilla%2Fdiscussions%2F0%2F1%2Fgeneral" class="SinkDiscussion">Sink</a></li>
               <li><a href="/index.php?p=/vanilla/discussion/close/1/Z4J2GFMVJ0YL&amp;amp;Target=vanilla%2Fdiscussions%2F0%2F1%2Fgeneral" class="CloseDiscussion">Close</a></li>
               <li><a href="/index.php?p=/vanilla/discussion/delete/1/Z4J2GFMVJ0YL&amp;amp;Target=vanilla%2Fdiscussions%2F0%2F1%2Fgeneral" class="DeleteDiscussion">Delete</a></li>
            </ul>
          </li>
        </ul>
    </div>
    <div class="ItemContent Discussion">
         <a href="/forum/discussion/{{ discussion.key() }}" class="Title">{{ discussion.title }}</a>
         <div class="Meta">
             <span class="CommentCount">1 comment</span>
             <span class="LastCommentBy">Started by <a href="/user/{{ discussion.owner.user_name }}">{{ discussion.owner.user_name }}</a></span>
             <span class="LastCommentDate">August 6</span>
             <span><a href="/forum/categories/{{ discussion.parent().name }}" class="Category">{{ discussion.parent().name }}</a></span>
         </div>
    </div>
</li>
{%- endmacro %}

{% macro render_forum_panel() -%}
{% if request.user.is_anonymous() %}
     <div class="Box GuestBox">
       <h4>你好, 新同学!</h4>
       <p>貌似这位同鞋你是新来的吧. 点下面的按钮可以加入我们!</p>
       <p>
          <a href="/#/signin" class="Button SignInPopup">登陆</a>
          <a href="/register" class="Button ApplyButton">申请加入</a>
          <a href="/#/weibo" title="用微博账号登录"><img src="/media/images/weibo.png" /></a>
       </p>
     </div>
{% else %}
    <a href="/forum/new/discussion" class="BigButton NewDiscussion">开始新讨论</a>
     <div class="Box BoxCategories">
          <h4><a href="/forum/categories/all">Categories</a></h4>
          <ul class="PanelInfo PanelCategories">
             <li class="Active"><span><strong><a href="/forum/discussions">All Discussions</a></strong><span class="Count">1</span></span></li>
             {% for category in categories %}
             <li class="Depth1"><strong><a href="/forum/categories/{{ category.key() }}">{{ category.name }}</a></strong><span class="Count">{{ category.num_courses() }}</span></li>
             {% endfor %}
          </ul>
     </div>
     <div id="WhosOnline" class="Box">
         <h4>Who's Online (1)</h4>
         <ul class="PanelInfo">
             <li>
                   <strong >
                       <a href="/index.php?p=/profile/1/zhaozhou">zhaozhou</a>
                   </strong>
                   10:53PM
             </li>
         </ul>
     </div>
{% endif %}
{%- endmacro %}

{% macro render_pager() -%}
<div class="P">
    <div id="PagerBefore" class="Pager NumberedPager">
        <span class="Previous">‹</span>
        <a href="/discussions/p1" class="Highlight">1</a>
        <a href="/discussions/p2">2</a><a href="/discussions/p3">3</a>
        <a href="/discussions/p4">4</a><a href="/discussions/p5">5</a>
        <a href="/discussions/p6">6</a><a href="/discussions/p7">7</a>
        <span class="Ellipsis">…</span>
        <a href="/discussions/p260">260</a>
        <a href="/discussions/p2" class="Next">›</a>
    </div>
</div>
{%- endmacro  %}